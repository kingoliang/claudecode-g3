---
description: OpenSpec é©±åŠ¨çš„è¿­ä»£å¼ä»£ç å®ç°ï¼Œç»“åˆè§„èŒƒç®¡ç†å’Œè´¨é‡ä¿è¯ï¼Œæ”¯æŒè·¨ä¼šè¯æ¢å¤
argument-hint: [change-id]
optional: true
---

# OpenSpec è¿­ä»£å¼å®ç°

å˜æ›´ ID: $ARGUMENTS

---

## âš ï¸ MANDATORY EXECUTION RULES (å¿…é¡»ä¸¥æ ¼éµå®ˆ)

**ä»¥ä¸‹è§„åˆ™å¿…é¡»ä¸¥æ ¼æ‰§è¡Œï¼Œä¸å¾—è·³è¿‡æˆ–ç®€åŒ–ã€‚è¿åä»»ä½•è§„åˆ™è§†ä¸ºæ‰§è¡Œå¤±è´¥ã€‚**

### Rule 1: Agent è°ƒç”¨ (MUST)

ä½ **å¿…é¡»**ä½¿ç”¨ Task tool è°ƒç”¨ä»¥ä¸‹ agentsï¼Œ**ç¦æ­¢**ç›´æ¥ç¼–å†™ä»£ç æˆ–è·³è¿‡æ£€æŸ¥ï¼š

```
ä»£ç ç”Ÿæˆ:    Task(subagent_type="code-writer", prompt="...")
å®‰å…¨æ£€æŸ¥:    Task(subagent_type="security-reviewer", prompt="...")
è´¨é‡æ£€æŸ¥:    Task(subagent_type="quality-checker", prompt="...")
æ€§èƒ½åˆ†æ:    Task(subagent_type="performance-analyzer", prompt="...")
ç»“æœèšåˆ:    Task(subagent_type="result-aggregator", prompt="...")
```

### Rule 2: æŠ€æœ¯æ ˆåŠ è½½ (MUST - åœ¨ä»£ç ç”Ÿæˆå‰æ‰§è¡Œ)

åœ¨è°ƒç”¨ code-writer ä¹‹å‰ï¼Œ**å¿…é¡»**å…ˆåŠ è½½é¡¹ç›®æŠ€æœ¯æ ˆã€‚

```
# Step 0: æŠ€æœ¯æ ˆåŠ è½½ (MUST)
IF .claude/tech-stack.json ä¸å­˜åœ¨:
    è°ƒç”¨ /tech-stack å‘½ä»¤ç”Ÿæˆ

tech_stack = è¯»å– .claude/tech-stack.json
```

**è¯´æ˜**:
- `/tech-stack` å‘½ä»¤è´Ÿè´£æ£€æµ‹é¡¹ç›®é…ç½®å¹¶ç”Ÿæˆ `.claude/tech-stack.json`
- å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œç›´æ¥è¯»å–ä½¿ç”¨ï¼ˆä¸é‡å¤æ£€æµ‹ï¼‰
- éœ€è¦é‡æ–°æ£€æµ‹æ—¶ï¼Œè¿è¡Œ `/tech-stack --refresh`

### Rule 3: è¿­ä»£å¾ªç¯ (MUST)

å¯¹æ¯ä¸ªä»»åŠ¡ï¼Œä½ **å¿…é¡»**æ‰§è¡Œä»¥ä¸‹å¾ªç¯ï¼Œç›´åˆ° PASS æˆ–è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°(5è½®)ï¼š

```
iteration = 0
feedback = ""
# tech_stack å·²åœ¨ Step 0 é€šè¿‡ /tech-stack å‘½ä»¤åŠ è½½

WHILE (NOT PASS AND iteration < 5):
    iteration++

    # Step A: ä½ å¿…é¡»è°ƒç”¨ code-writerï¼Œå¹¶ä¼ é€’æŠ€æœ¯æ ˆä¿¡æ¯
    result = Task(
        subagent_type="code-writer",
        prompt="ä»»åŠ¡: {task_description}\nè§„èŒƒ: {spec}\nè®¾è®¡: {design}\næŠ€æœ¯æ ˆ: {tech_stack}\nåé¦ˆ: {feedback}"
    )

    # Step B: ä½ å¿…é¡»åœ¨ã€å•ä¸ªæ¶ˆæ¯ã€‘ä¸­ã€å¹¶è¡Œã€‘è°ƒç”¨ 3 ä¸ª reviewerï¼Œå¹¶ä¼ é€’æŠ€æœ¯æ ˆ
    # å‘é€ä¸€æ¡æ¶ˆæ¯ï¼ŒåŒ…å« 3 ä¸ª Task è°ƒç”¨
    security_result = Task(subagent_type="security-reviewer", prompt="... æŠ€æœ¯æ ˆ: {tech_stack}")
    quality_result = Task(subagent_type="quality-checker", prompt="... æŠ€æœ¯æ ˆ: {tech_stack}")
    performance_result = Task(subagent_type="performance-analyzer", prompt="... æŠ€æœ¯æ ˆ: {tech_stack}")

    # Step C: ä½ å¿…é¡»è°ƒç”¨ result-aggregator æ±‡æ€»
    aggregated = Task(
        subagent_type="result-aggregator",
        prompt="æ±‡æ€»ä»¥ä¸‹æ£€æŸ¥ç»“æœ:\næŠ€æœ¯æ ˆ: {tech_stack}\nå®‰å…¨: {security_result}\nè´¨é‡: {quality_result}\næ€§èƒ½: {performance_result}"
    )

    # Step D: æ ¹æ®ç»“æœå†³å®šä¸‹ä¸€æ­¥
    IF aggregated.result == "PASS":
        æ›´æ–° tasks.md æ ‡è®°å®Œæˆ
        è¿›å…¥ä¸‹ä¸€ä¸ªä»»åŠ¡
        BREAK
    ELSE IF aggregated.result == "ITERATE":
        feedback = aggregated.feedback_for_code_writer
        ç»§ç»­å¾ªç¯
    ELSE IF aggregated.result == "STALLED":
        è®°å½•é˜»å¡é—®é¢˜
        è¯·æ±‚äººå·¥ä»‹å…¥
        BREAK
```

### Rule 4: ç¦æ­¢è¡Œä¸º (FORBIDDEN)

- âŒ **ç¦æ­¢**: ä¸åŠ è½½æŠ€æœ¯æ ˆå°±å¼€å§‹ç”Ÿæˆä»£ç 
- âŒ **ç¦æ­¢**: ç›´æ¥ç¼–å†™ä»£ç è€Œä¸è°ƒç”¨ code-writer agent
- âŒ **ç¦æ­¢**: è·³è¿‡ä»»ä½• reviewer agent çš„æ£€æŸ¥
- âŒ **ç¦æ­¢**: ä¸è°ƒç”¨ result-aggregator å°±åˆ¤å®šæ˜¯å¦é€šè¿‡
- âŒ **ç¦æ­¢**: é€ä¸ªè°ƒç”¨ reviewer agents (å¿…é¡»å¹¶è¡Œï¼Œå•ä¸ªæ¶ˆæ¯ 3 ä¸ª Task)
- âŒ **ç¦æ­¢**: ä¿®æ”¹ä»£ç åä¸é‡æ–°è¿è¡Œæ£€æŸ¥æµç¨‹
- âŒ **ç¦æ­¢**: ç”Ÿæˆä¸é¡¹ç›®æŠ€æœ¯æ ˆä¸å…¼å®¹çš„ä»£ç 
- âŒ **ç¦æ­¢**: æ¯æ¬¡è¿­ä»£éƒ½é‡æ–°æ£€æµ‹æŠ€æœ¯æ ˆï¼ˆåº”ä½¿ç”¨ .claude/tech-stack.json ç¼“å­˜ï¼‰

### Rule 5: context.md ç”Ÿæˆ (MUST)

ä¼šè¯ç»“æŸå‰ï¼Œä½ **å¿…é¡»**ç”Ÿæˆæˆ–æ›´æ–° `openspec/changes/$ARGUMENTS/context.md` æ–‡ä»¶ï¼ŒåŒ…å«ï¼š

```markdown
## Session {YYYY-MM-DD HH:MM}

- **Completed Tasks**: [åˆ—å‡ºå®Œæˆçš„ä»»åŠ¡]
- **Validation Scores**: Security: X/100, Quality: X/100, Performance: X/100
- **Issues Encountered**: [åˆ—å‡ºé‡åˆ°çš„é—®é¢˜]

## Quick Resume (For Context Reset)

> **TL;DR**: [ä¸€å¥è¯æ€»ç»“å½“å‰çŠ¶æ€]

**Last Working State**:
- **Current Task**: [å½“å‰ä»»åŠ¡]
- **Files Modified**: [ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨]
- **Compilation Status**: [ç¼–è¯‘çŠ¶æ€]
- **Blockers**: [é˜»å¡é—®é¢˜]

**Next Steps**:
1. [ä¸‹ä¸€æ­¥æ“ä½œ 1]
2. [ä¸‹ä¸€æ­¥æ“ä½œ 2]
```

---

## å®Œæ•´å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OpenSpec ç”Ÿå‘½å‘¨æœŸ                         â”‚
â”‚  /os-proposal â†’ /os-apply-iterative â†’ /os-archive           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: åŠ è½½ OpenSpec æ–‡æ¡£                                  â”‚
â”‚  - proposal.md (ç›®æ ‡å’ŒèŒƒå›´)                                  â”‚
â”‚  - design.md (æŠ€æœ¯è®¾è®¡)                                      â”‚
â”‚  - tasks.md (ä»»åŠ¡æ¸…å•)                                       â”‚
â”‚  - context.md (æ¢å¤ä¸Šæ¬¡ä¼šè¯)                                 â”‚
â”‚  - specs/*.md (éœ€æ±‚è§„èŒƒ)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: æ¢å¤ä¼šè¯ä¸Šä¸‹æ–‡                                      â”‚
â”‚  - è¯»å– context.md çš„ "Quick Resume"                        â”‚
â”‚  - ç¡®å®šä»å“ªä¸ªä»»åŠ¡ç»§ç»­                                        â”‚
â”‚  - åŠ è½½å·²çŸ¥é˜»å¡é—®é¢˜                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: æŠ€æœ¯æ ˆåŠ è½½ (MUST)                                   â”‚
â”‚  - æ£€æŸ¥ .claude/tech-stack.json æ˜¯å¦å­˜åœ¨                     â”‚
â”‚  - å­˜åœ¨ â†’ ç›´æ¥è¯»å–ä½¿ç”¨                                       â”‚
â”‚  - ä¸å­˜åœ¨ â†’ è°ƒç”¨ /tech-stack å‘½ä»¤ç”Ÿæˆ                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
            â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
            â•‘  Step 4: å¯¹æ¯ä¸ªå¾…å®Œæˆä»»åŠ¡æ‰§è¡Œ      â•‘
            â•‘         è¿­ä»£å¼åä½œå¾ªç¯             â•‘
            â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4.1 code-writer ç¼–å†™ä»£ç                                     â”‚
â”‚  - è¾“å…¥: ä»»åŠ¡æè¿° + spec.md + design.md + æŠ€æœ¯æ ˆ             â”‚
â”‚  - è¾“å‡º: ç¬¦åˆæŠ€æœ¯æ ˆçº¦æŸçš„ä»£ç å®ç°                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4.2 å¹¶è¡Œè´¨é‡æ£€æŸ¥ (ä¼ é€’æŠ€æœ¯æ ˆ)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ security      â”‚ quality       â”‚ performance                 â”‚
â”‚ -reviewer     â”‚ -checker      â”‚ -analyzer                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4.3 result-aggregator æ±‡æ€»åˆ¤å®š                              â”‚
â”‚  - è¾¾æ ‡ â†’ è¿›å…¥ä¸‹ä¸€ä»»åŠ¡                                       â”‚
â”‚  - æœªè¾¾æ ‡ â†’ åé¦ˆç»™ code-writerï¼Œç»§ç»­è¿­ä»£                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 5: æ›´æ–° OpenSpec æ–‡æ¡£                                  â”‚
â”‚  - context.md (ä¼šè¯å†å²ã€è¿›åº¦ã€æŠ€æœ¯æ ˆä¿¡æ¯)                   â”‚
â”‚  - tasks.md (ä»»åŠ¡çŠ¶æ€)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## è¯¦ç»†æ‰§è¡Œæ­¥éª¤

### Step 1: åŠ è½½ OpenSpec æ–‡æ¡£

è¯»å– `openspec/changes/$ARGUMENTS/` ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡æ¡£:

```bash
# å¿…éœ€æ–‡ä»¶
openspec/changes/$ARGUMENTS/proposal.md    # ç†è§£å˜æ›´ç›®æ ‡
openspec/changes/$ARGUMENTS/design.md      # ç†è§£æŠ€æœ¯è®¾è®¡
openspec/changes/$ARGUMENTS/tasks.md       # è·å–ä»»åŠ¡æ¸…å•
openspec/changes/$ARGUMENTS/context.md     # æ¢å¤ä¼šè¯çŠ¶æ€

# è§„èŒƒæ–‡ä»¶
openspec/changes/$ARGUMENTS/specs/*/spec.md  # éœ€æ±‚è§„èŒƒ
```

### Step 2: æ¢å¤ä¼šè¯ä¸Šä¸‹æ–‡

ä» `context.md` çš„ **Quick Resume** éƒ¨åˆ†è·å–:

1. **ä¸Šæ¬¡å·¥ä½œçŠ¶æ€**
   - æ­£åœ¨å¤„ç†çš„ä»»åŠ¡
   - å·²ä¿®æ”¹çš„æ–‡ä»¶
   - ç¼–è¯‘/æµ‹è¯•çŠ¶æ€

2. **å¾…å®Œæˆä»»åŠ¡**
   - ä» tasks.md è·å–æœªå®Œæˆä»»åŠ¡
   - æŒ‰ç…§åŸæœ‰é¡ºåºæ‰§è¡Œ

3. **å·²çŸ¥é˜»å¡é—®é¢˜**
   - éœ€è¦å¤„ç†çš„æŠ€æœ¯å€ºåŠ¡
   - éœ€è¦äººå·¥ä»‹å…¥çš„é—®é¢˜

### Step 3: æŠ€æœ¯æ ˆåŠ è½½ (MUST)

åœ¨ç”Ÿæˆä»»ä½•ä»£ç ä¹‹å‰ï¼ŒåŠ è½½é¡¹ç›®æŠ€æœ¯æ ˆï¼š

```
IF .claude/tech-stack.json ä¸å­˜åœ¨:
    è°ƒç”¨ /tech-stack å‘½ä»¤ç”Ÿæˆ

tech_stack = è¯»å– .claude/tech-stack.json
```

**è¯´æ˜**:
- `/tech-stack` å‘½ä»¤è´Ÿè´£æ£€æµ‹é¡¹ç›®é…ç½®å¹¶ç”Ÿæˆ `.claude/tech-stack.json`
- å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œç›´æ¥è¯»å–ä½¿ç”¨ï¼ˆä¸é‡å¤æ£€æµ‹ï¼‰
- éœ€è¦é‡æ–°æ£€æµ‹æ—¶ï¼Œè¿è¡Œ `/tech-stack --refresh`
- è¯¦ç»†çš„æ£€æµ‹é€»è¾‘å’Œæ–‡ä»¶æ ¼å¼è§ `/tech-stack` å‘½ä»¤æ–‡æ¡£

### Step 4: å¯¹æ¯ä¸ªä»»åŠ¡æ‰§è¡Œè¿­ä»£å¼åä½œ

å¯¹ `tasks.md` ä¸­æ¯ä¸ªçŠ¶æ€ä¸º `â³ Not Started` æˆ– `ğŸ—ï¸ In Progress` çš„ä»»åŠ¡:

#### 4.1 åˆå§‹ä»£ç ç”Ÿæˆ

ä½¿ç”¨ `code-writer` Agentï¼Œ**å¿…é¡»ä¼ é€’æŠ€æœ¯æ ˆä¿¡æ¯**:

```json
{
  "task": "å½“å‰ä»»åŠ¡æè¿°",
  "spec": "æ¥è‡ª spec.md çš„éœ€æ±‚",
  "design": "æ¥è‡ª design.md çš„æŠ€æœ¯è®¾è®¡",
  "tech_stack": {
    "language": "TypeScript",
    "framework": "Next.js@14.0.0",
    "constraints": ["ESM", "React 18"]
  },
  "context": "é¡¹ç›®ä¸Šä¸‹æ–‡å’Œçº¦æŸ"
}
```

#### 4.2 å¹¶è¡Œè´¨é‡æ£€æŸ¥

**åŒæ—¶å¯åŠ¨ 3 ä¸ªæ£€æŸ¥ Agentï¼Œä¼ é€’æŠ€æœ¯æ ˆä¿¡æ¯:**

| Agent | æ£€æŸ¥å†…å®¹ | è¾¾æ ‡æ ‡å‡† |
|-------|---------|---------|
| security-reviewer | å®‰å…¨æ¼æ´ (è¯­è¨€/æ¡†æ¶ç‰¹å®š) | â‰¥ 85 åˆ†, æ—  Critical |
| quality-checker | ä»£ç è´¨é‡ (é£æ ¼è§„èŒƒ) | â‰¥ 80 åˆ† |
| performance-analyzer | æ€§èƒ½é—®é¢˜ (æ¡†æ¶ç‰¹å®š) | â‰¥ 80 åˆ† |

#### 4.3 ç»“æœèšåˆä¸åˆ¤å®š

ä½¿ç”¨ `result-aggregator` Agent:

- **PASS**: æ›´æ–° tasks.mdï¼Œè¿›å…¥ä¸‹ä¸€ä»»åŠ¡
- **ITERATE**: åé¦ˆç»™ code-writerï¼Œç»§ç»­è¿­ä»£ (æœ€å¤š 5 è½®)
- **STALLED**: è®°å½•é˜»å¡ï¼Œè¯·æ±‚äººå·¥ä»‹å…¥

### Step 5: æ›´æ–° OpenSpec æ–‡æ¡£

#### æ›´æ–° context.md

æ¯æ¬¡ä»»åŠ¡å®Œæˆåï¼Œè¿½åŠ ä¼šè¯è®°å½•:

```markdown
## Session YYYY-MM-DD HH:MM

- **Duration**: X hours
- **Completed Tasks**:
  - Task 1.1: åˆ›å»º UserController âœ…
  - Task 1.2: åˆ›å»º UserService âœ…
- **Key Decisions**:
  - ä½¿ç”¨ BCrypt è¿›è¡Œå¯†ç å“ˆå¸Œ
  - JWT è¿‡æœŸæ—¶é—´è®¾ä¸º 1 å°æ—¶
- **Code Changes**:
  - Added: UserController.java (120 lines)
  - Added: UserService.java (85 lines)
  - Modified: SecurityConfig.java (+15 lines)
- **Issues Encountered**: æ— 
- **Validation Results**:
  - Security: 92/100
  - Quality: 88/100
  - Performance: 95/100

## Quick Resume (For Context Reset)

> **TL;DR for next session**: å®Œæˆäº†ç”¨æˆ·è®¤è¯åŸºç¡€åŠŸèƒ½ï¼Œä¸‹æ¬¡ç»§ç»­å®ç° JWT åˆ·æ–°

**Last Working State**:
- **What I was doing**: Task 2 - JWT åˆ·æ–°é€»è¾‘
- **Files modified**:
  - UserController.java (å®Œæˆ)
  - UserService.java (å®Œæˆ)
  - TokenService.java (è¿›è¡Œä¸­)
- **Compilation status**: âœ… Clean
- **Test status**: âœ… 12/12 pass
- **Blockers**: æ— 

**Next Steps**:
1. å®ç° TokenService.refreshToken() æ–¹æ³•
2. æ·»åŠ åˆ·æ–°ä»¤ç‰Œå­˜å‚¨é€»è¾‘
3. ç¼–å†™åˆ·æ–°ä»¤ç‰Œæµ‹è¯•
```

#### æ›´æ–° tasks.md

```markdown
### Phase 1: Foundation & Setup

- [x] Task 1.1: åˆ›å»º UserController âœ…
  - **Completed**: 2025-01-15 14:30
  - **Iterations**: 2
  - **Final Score**: 91/100

- [x] Task 1.2: åˆ›å»º UserService âœ…
  - **Completed**: 2025-01-15 15:45
  - **Iterations**: 1
  - **Final Score**: 94/100

- [ ] Task 1.3: åˆ›å»º TokenService ğŸ—ï¸
  - **Started**: 2025-01-15 16:00
  - **Current Iteration**: 1
```

## è¿­ä»£æ§åˆ¶

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| æ¯ä»»åŠ¡æœ€å¤§è¿­ä»£ | 5 è½® | é˜²æ­¢æ— é™å¾ªç¯ |
| è¾¾æ ‡ç»¼åˆè¯„åˆ† | â‰¥ 80 | åŠ æƒå¹³å‡ |
| å®‰å…¨è¯„åˆ†é˜ˆå€¼ | â‰¥ 85 | å®‰å…¨ä¼˜å…ˆ |
| åœæ»æ£€æµ‹ | 2 è½® | è¿ç»­è¿›æ­¥ < 5 åˆ† |

## è¾“å‡º

### æˆåŠŸå®Œæˆæ‰€æœ‰ä»»åŠ¡
```
âœ… OpenSpec å˜æ›´å®ç°å®Œæˆï¼

## å˜æ›´: $ARGUMENTS
- ä»»åŠ¡å®Œæˆ: 5/5 (100%)
- æ€»è¿­ä»£æ¬¡æ•°: 8
- æœ€ç»ˆç»¼åˆè¯„åˆ†: 89/100

## ä¸‹ä¸€æ­¥
è¿è¡Œ `/openspec:archive $ARGUMENTS` å½’æ¡£æ­¤å˜æ›´
```

### éƒ¨åˆ†å®Œæˆ (ä¼šè¯ç»“æŸ)
```
ğŸ”„ ä¼šè¯ä¿å­˜æˆåŠŸ

## è¿›åº¦
- ä»»åŠ¡å®Œæˆ: 3/5 (60%)
- å½“å‰ä»»åŠ¡: Task 4 - Integration tests

## æ¢å¤æ–¹å¼
ä¸‹æ¬¡è¿è¡Œ `/os-apply-iterative $ARGUMENTS` å°†è‡ªåŠ¨ä» Task 4 ç»§ç»­

## ä¿å­˜çš„æ–‡ä»¶
- context.md (å·²æ›´æ–°)
- tasks.md (å·²æ›´æ–°)
```

## ä½¿ç”¨ç¤ºä¾‹

```bash
# 1. é¦–å…ˆåˆ›å»ºææ¡ˆ
/openspec:proposal "å®ç°ç”¨æˆ·è®¤è¯ç³»ç»Ÿ"

# 2. ä½¿ç”¨è¿­ä»£å¼åä½œå®ç°
/os-apply-iterative CHG-user-auth

# 3. ä¸‹æ¬¡ä¼šè¯ç»§ç»­ (è‡ªåŠ¨æ¢å¤)
/os-apply-iterative CHG-user-auth

# 4. å®Œæˆåå½’æ¡£
/openspec:archive CHG-user-auth
```

## ä¸ç°æœ‰ OpenSpec å‘½ä»¤çš„å…³ç³»

| å‘½ä»¤ | ç”¨é€” | æ›¿ä»£/å¢å¼º |
|------|------|----------|
| `/openspec:proposal` | åˆ›å»ºå˜æ›´è§„èŒƒ | ä¿æŒä¸å˜ |
| `/openspec:apply` | åŸæœ‰çš„å®ç°å‘½ä»¤ | **æ­¤å‘½ä»¤å¢å¼º** |
| `/os-apply-iterative` | è¿­ä»£å¼å®ç° (å¸¦è´¨é‡ä¿è¯) | æ–°å¢ |
| `/openspec:archive` | å½’æ¡£å˜æ›´ | ä¿æŒä¸å˜ |

**æ¨è**: å¯¹äºéœ€è¦é«˜è´¨é‡ä¿è¯çš„åŠŸèƒ½ï¼Œä½¿ç”¨ `/os-apply-iterative` æ›¿ä»£ `/openspec:apply`ã€‚
